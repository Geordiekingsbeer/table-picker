async function loadTables() {
            // --- DEFINITIVE LIST OF 21 TABLES WITH CORRECT SIZES ---
            const baseTables = [
                // Original Tables 1-17 (Your original existing layout)
                { id: 1, x: 235, y: 110, w: 90, h: 30, rotation: 0 },
                { id: 2, x: 100, y: 30, w: 90, h: 30, rotation: 0 },
                { id: 3, x: 100, y: 150, w: 30, h: 30, rotation: 0 },
                { id: 4, x: 140, y: 220, w: 30, h: 30, rotation: 0 },
                { id: 5, x: 180, y: 300, w: 50, h: 30, rotation: 90 }, // 4-seater
                { id: 6, x: 250, y: 330, w: 30, h: 30, rotation: 0 },
                { id: 7, x: 30, y: 300, w: 50, h: 30, rotation: 90 }, // 4-seater
                { id: 8, x: 400, y: 100, w: 30, h: 30, rotation: 0 },
                { id: 9, x: 20, y: 180, w: 30, h: 50, rotation: 0 }, // 4-seater
                { id: 10, x: 300, y: 240, w: 30, h: 30, rotation: 0 },
                { id: 11, x: 40, y: 80, w: 30, h: 30, rotation: 0 },
                { id: 12, x: 350, y: 350, w: 50, h: 30, rotation: 0 }, // 4-seater
                { id: 13, x: 400, y: 280, w: 30, h: 30, rotation: 0 },
                { id: 14, x: 250, y: 180, w: 30, h: 30, rotation: 0 },
                { id: 15, x: 330, y: 30, w: 90, h: 30, rotation: 0 }, // 6-seater
                { id: 16, x: 30, y: 400, w: 30, h: 30, rotation: 0 },
                { id: 17, x: 200, y: 30, w: 90, h: 30, rotation: 0 }, // 6-seater
                
                // --- NEW TABLES REQUESTED (IDs 18-21) ---
                { id: 18, x: 140, y: 280, w: 30, h: 30, rotation: 0 }, // New 2-seater
                { id: 19, x: 220, y: 280, w: 30, h: 30, rotation: 0 }, // New 2-seater
                { id: 20, x: 300, y: 280, w: 30, h: 30, rotation: 0 }, // New 2-seater
                { id: 21, x: 300, y: 180, w: 50, h: 30, rotation: 90 }, // New 4-seater (50x30, rotated)
            ];
            
            let { data: dbData, error } = await _supa.from('tables').select('id, x, y, rotation').order('id');

            if (error) {
                console.warn("Could not fetch table positions from Supabase. Using default initial positions.");
                tables = baseTables;
            } else {
                const positionMap = new Map(dbData.map(t => [t.id, t]));
                
                // Use the initial table list, updating positions from the DB if available
                tables = baseTables.map(t => {
                    const dbPos = positionMap.get(t.id);
                    if (dbPos) {
                        return { 
                            id: t.id, 
                            x: dbPos.x, 
                            y: dbPos.y, 
                            w: t.w, // Ensure w/h are taken from hardcoded list for accurate seat drawing
                            h: t.h, 
                            rotation: dbPos.rotation 
                        };
                    }
                    return t; 
                });
                
                // Clean up duplicates and sort
                tables = tables.filter((t, index, self) => 
                    index === self.findIndex((tt) => (tt.id === t.id))
                ).sort((a, b) => a.id - b.id);
            }
            
            layer.destroyChildren(); 
            tables.forEach(t => {
                const group = drawTable(t);
                const tableRect = group.findOne('.main-table');

                group.offset({ x: tableRect.width()/2, y: tableRect.height()/2 });
                group.x(t.x + tableRect.width()/2);
                group.y(t.y + tableRect.height()/2);
                group.rotation(t.rotation || 0); 
            });
            layer.draw();
            
            selectedMultiTables.clear();
            isMultiSelectMode = false;
            document.getElementById('multi-select-toggle').dataset.active = 'false';
            document.getElementById('multi-select-toggle').classList.remove('active');
            document.getElementById('multi-select-toggle').textContent = 'Start Multi-Select Mode';
            multiBookButton.style.display = 'none';

            await loadBookings(); 
        }
